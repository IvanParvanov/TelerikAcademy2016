{"version":3,"sources":["task-1.js"],"names":[],"mappings":";;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;AAqBA,SAAS,KAAT,GAAiB;AAChB,KAAI,UAAW,YAAY;AAC1B,MAAI,QAAQ,EAAZ;AACA,MAAI,aAAa,EAAjB;AACA,WAAS,SAAT,CAAmB,IAAnB,EAAyB;AACf,OAAG,QAAQ,KAAK,QAAhB,EAA0B;AAC5B,WAAO,MAAM,MAAN,CAAa;AAAA,YAAK,EAAE,QAAF,KAAe,KAAK,QAAzB;AAAA,KAAb,CAAP;AACG;;AAED,OAAG,QAAQ,KAAK,MAAhB,EAAwB;AACpB,WAAO,MAAM,MAAN,CAAa;AAAA,YAAK,EAAE,MAAF,KAAa,KAAK,MAAvB;AAAA,KAAb,CAAP;AACH;AACV,UAAO,KAAP;AACA;;AAED,WAAS,OAAT,CAAiB,IAAjB,EAAuB;AACnB,OAAG,CAAC,KAAK,KAAN,IAAe,KAAK,KAAL,CAAW,MAAX,GAAoB,CAAnC,IAAwC,KAAK,KAAL,CAAW,MAAX,GAAoB,GAA/D,EAAoE;AAChE,UAAM,IAAI,KAAJ,CAAU,kDAAV,CAAN;AACG;;AAED,OAAG,CAAC,KAAK,QAAN,IAAkB,KAAK,QAAL,CAAc,MAAd,GAAuB,CAAzC,IAA8C,KAAK,QAAL,CAAc,MAAd,GAAuB,GAAxE,EAA6E;AACzE,UAAM,IAAI,KAAJ,CAAU,qDAAV,CAAN;AACH;;AAED,OAAG,CAAC,KAAK,MAAN,IAAgB,KAAK,MAAL,KAAgB,EAAhC,IAAsC,KAAK,MAAL,CAAY,MAAZ,KAAuB,CAAhE,EAAmE;AAC/D,UAAM,IAAI,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAED,OAAG,MAAM,IAAN,CAAW;AAAA,WAAK,EAAE,KAAF,KAAY,KAAK,KAAtB;AAAA,IAAX,KACA,MAAM,IAAN,CAAW;AAAA,WAAK,EAAE,IAAF,KAAW,KAAK,IAArB;AAAA,IAAX,CADH,EAC0C;AACtC,UAAM,IAAI,KAAJ,CAAU,iCAAV,CAAN;AACH;;AAED,OAAG,KAAK,IAAL,CAAU,QAAV,GAAqB,MAArB,IAA+B,EAA/B,IAAqC,KAAK,IAAL,CAAU,QAAV,GAAqB,MAArB,IAA+B,EAAvE,EAA2E;AACvE,UAAM,IAAI,KAAJ,CAAU,eAAV,CAAN;AACH;;AAED,OAAG,CAAC,WAAW,IAAX,CAAgB;AAAA,WAAK,MAAM,KAAK,QAAhB;AAAA,IAAhB,CAAJ,EAA+C;AAC3C,eAAW,IAAX,CAAgB,KAAK,QAArB;AACH;;AAEV,QAAK,EAAL,GAAU,MAAM,MAAN,GAAe,CAAzB;;AAEA,SAAM,IAAN,CAAW,IAAX;AACA,UAAO,IAAP;AACA;;AAED,WAAS,cAAT,GAA0B;AACzB,UAAO,UAAP;AACA;;AAED,SAAO;AACN,UAAO;AACN,UAAM,SADA;AAEN,SAAK;AAFC,IADD;AAKN,eAAY;AACX,UAAM;AADK;AALN,GAAP;AASA,EA3Dc,EAAf;AA4DA,QAAO,OAAP;AACA;AACD,OAAO,OAAP,GAAiB,KAAjB","file":"task-1-compiled.js","sourcesContent":["/* Task Description */\n/* \n\t*\tCreate a module for working with books\n\t\t*\tThe module must provide the following functionalities:\n\t\t\t*\tAdd a new book to category\n\t\t\t\t*\tEach book has unique title, author and ISBN\n\t\t\t\t*\tIt must return the newly created book with assigned ID\n\t\t\t\t*\tIf the category is missing, it must be automatically created\n\t\t\t*\tList all books\n\t\t\t\t*\tBooks are sorted by ID\n\t\t\t\t*\tThis can be done by author, by category or all\n\t\t\t*\tList all categories\n\t\t\t\t*\tCategories are sorted by ID\n\t\t*\tEach book/catagory has a unique identifier (ID) that is a number greater than or equal to 1\n\t\t\t*\tWhen adding a book/category, the ID is generated automatically\n\t\t*\tAdd validation everywhere, where possible\n\t\t\t*\tBook title and category name must be between 2 and 100 characters, including letters, digits and special characters ('!', ',', '.', etc)\n\t\t\t*\tAuthor is any non-empty string\n\t\t\t*\tUnique params are Book title and Book ISBN\n\t\t\t*\tBook ISBN is an unique code that contains either 10 or 13 digits\n\t\t\t*\tIf something is not valid - throw Error\n*/\nfunction solve() {\n\tvar library = (function () {\n\t\tvar books = [];\n\t\tvar categories = [];\n\t\tfunction listBooks(args) {\n            if(args && args.category) {\n\t\t        return books.filter(x => x.category === args.category);\n            }\n\n            if(args && args.author) {\n                return books.filter(x => x.author === args.author);\n            }\n\t\t\treturn books;\n\t\t}\n\n\t\tfunction addBook(book) {\n\t\t    if(!book.title || book.title.length < 2 || book.title.length > 100) {\n\t\t        throw new Error(\"Book title must be between 2 and 100 chars long.\");\n            }\n\n            if(!book.category || book.category.length < 2 || book.category.length > 100) {\n                throw new Error(\"Book category must be between 2 and 100 chars long.\");\n            }\n\n            if(!book.author || book.author === \"\" || book.author.length === 0) {\n                throw new Error(\"Book author cannot be empty\");\n            }\n\n            if(books.some(x => x.title === book.title)\n            || books.some(x => x.isbn === book.isbn)) {\n                throw new Error(\"Cannot add the same book twice!\");\n            }\n\n            if(book.isbn.toString().length != 10 && book.isbn.toString().length != 13) {\n                throw new Error(\"Invalid isbn!\");\n            }\n\n            if(!categories.some(x => x === book.category)) {\n                categories.push(book.category);\n            }\n\n\t\t\tbook.ID = books.length + 1;\n\n\t\t\tbooks.push(book);\n\t\t\treturn book;\n\t\t}\n\n\t\tfunction listCategories() {\n\t\t\treturn categories;\n\t\t}\n\n\t\treturn {\n\t\t\tbooks: {\n\t\t\t\tlist: listBooks,\n\t\t\t\tadd: addBook\n\t\t\t},\n\t\t\tcategories: {\n\t\t\t\tlist: listCategories\n\t\t\t}\n\t\t};\n\t} ());\n\treturn library;\n}\nmodule.exports = solve;\n"]}