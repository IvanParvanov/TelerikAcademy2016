{"version":3,"sources":["solution.js"],"names":[],"mappings":"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","file":"solution-compiled.js","sourcesContent":["function solve() {\r\n    \"use strict\";\r\n    var idGenerator = (function () {\r\n        let currentId = 0;\r\n\r\n        function getNext() {\r\n            currentId += 1;\r\n            return currentId;\r\n        }\r\n\r\n        return {\r\n            getNext: getNext\r\n        }\r\n    })();\r\n\r\n    var Validator = (function () {\r\n        function validateStringLength(string, min, max) {\r\n            if (string === null || typeof string === 'undefined') {\r\n                throw new Error(\"No string provided!\")\r\n            }\r\n            if (typeof min === 'undefined' && typeof max === 'undefined') {\r\n                if (string.length >= max) {\r\n                    throw new Error('String length must be less than ${max} characters long!')\r\n                }\r\n            }\r\n            else if (typeof max === 'undefined' || max === null) {\r\n                if (string.length <= min) {\r\n                    throw new Error('String length must be more than ${min} characters long!')\r\n                }\r\n            }\r\n            else {\r\n                if (string.length <= min || max <= string.length) {\r\n                    throw new Error('String length must be between ${min} and ${max} characters long!')\r\n                }\r\n            }\r\n        }\r\n\r\n        function validateISBN(string) {\r\n            if (isNaN(string) || (string.length != 10 && string.length != 13)) {\r\n                throw new Error(\"Invalid ISBN!\")\r\n            }\r\n        }\r\n\r\n        function validateNumberRange(number, minValue, maxValue) {\r\n            if (typeof number === 'undefined' || number === null) {\r\n                throw new Error('You must specify a number!')\r\n            }\r\n            if (typeof maxValue === 'undefined' || maxValue === null) {\r\n                if (number < minValue) {\r\n                    throw new Error(\"Number must be more than ${min}!\")\r\n                }\r\n            }\r\n            else {\r\n                if (number < minValue || maxValue < number) {\r\n                    throw new Error(\"Number must be between ${min} and ${max}!\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            validateStringLength,\r\n            validateISBN,\r\n            validateNumberRange\r\n        }\r\n\r\n    })();\r\n\r\n    class Item {\r\n        constructor(name, description) {\r\n            this._id = idGenerator.getNext();\r\n            this.description = description;\r\n            this.name = name;\r\n        }\r\n\r\n        get id() {\r\n            return this._id;\r\n        }\r\n\r\n        set name(value) {\r\n            Validator.validateStringLength(value, 1, 41);\r\n            this._name = value;\r\n        }\r\n\r\n        get name() {\r\n            return this._name;\r\n        }\r\n\r\n        set description(value) {\r\n            Validator.validateStringLength(value, 1);\r\n            this._description = value;\r\n        }\r\n\r\n        get description() {\r\n            return this._description;\r\n        }\r\n    }\r\n\r\n    class Book extends Item {\r\n        constructor(name, isbn, genre, description) {\r\n            super(name, description);\r\n            this.isbn = isbn;\r\n            this.genre = genre;\r\n        }\r\n\r\n        set isbn(isbn) {\r\n            Validator.validateISBN(isbn);\r\n            this._isbn = isbn;\r\n        }\r\n\r\n        get isbn() {\r\n            return this._isbn;\r\n        }\r\n\r\n        set genre(genre) {\r\n            Validator.validateStringLength(genre, 1, 21);\r\n            this._genre = genre;\r\n        }\r\n\r\n        get genre() {\r\n            return this._genre;\r\n        }\r\n    }\r\n\r\n    class Media extends Item {\r\n        constructor(name, rating, duration, description) {\r\n            super(name, description);\r\n            this.rating = rating;\r\n            this.duration = duration;\r\n        }\r\n\r\n        set rating(rating) {\r\n            Validator.validateNumberRange(rating, 1, 5);\r\n            this._rating = rating;\r\n        }\r\n\r\n        get rating() {\r\n            return this._rating;\r\n        }\r\n\r\n        set duration(duration) {\r\n            Validator.validateNumberRange(duration, 1);\r\n            this._duration = duration;\r\n        }\r\n\r\n        get duration() {\r\n            return this._duration;\r\n        }\r\n    }\r\n\r\n    class Catalog {\r\n        constructor(name) {\r\n            this.name = name;\r\n            this._id = idGenerator.getNext();\r\n            this.items = [];\r\n        }\r\n\r\n        get id() {\r\n            return this._id;\r\n        }\r\n\r\n        set name(name) {\r\n            Validator.validateStringLength(name, 1, 41);\r\n            this._name = name;\r\n        }\r\n\r\n        get name() {\r\n            return this._name;\r\n        }\r\n\r\n        add(...items) {\r\n            if (Array.isArray(items[0])) {\r\n                items = items[0];\r\n            }\r\n\r\n            if (items.length === 0) {\r\n                throw new Error('No items are added');\r\n            }\r\n\r\n            this.items.push(...items);\r\n\r\n            return this;\r\n        }\r\n\r\n        find(x) {\r\n            if (typeof x === 'number') {\r\n                for (let item of this.items) {\r\n                    if (item.id === x) {\r\n                        return item;\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            if (x !== null && typeof x === 'object') {\r\n                return this.items.filter(function (item) {\r\n                    return Object.keys(x).every(function (prop) {\r\n                        return x[prop] === item[prop];\r\n                    });\r\n                });\r\n            }\r\n\r\n            throw new Error('Invalid options or id');\r\n        }\r\n\r\n        search(pattern) {\r\n            if (typeof pattern != 'string' || pattern.length < 1) {\r\n                throw new Error(\"Invalid pattern length!\");\r\n            }\r\n            return this.items.filter(x => x.name.indexOf(pattern) >= 0 || x.description.indexOf(pattern) >= 0);\r\n        }\r\n    }\r\n\r\n    class BookCatalog extends Catalog {\r\n        constructor(name) {\r\n            super(name);\r\n        }\r\n\r\n        add(...books) {\r\n            if (Array.isArray(books[0])) {\r\n                books = books[0];\r\n            }\r\n\r\n            books.forEach(function (x) {\r\n                if (!(x instanceof Book)) {\r\n                    throw new Error('Must add only books');\r\n                }\r\n            });\r\n\r\n            return super.add(...books);\r\n        }\r\n\r\n        getGenres() {\r\n            let genres = [];\r\n            for (let book of this.items) {\r\n                if (genres.indexOf(book.genre) < 0) {\r\n                    genres.push(book.genre);\r\n                }\r\n            }\r\n            return genres;\r\n        }\r\n    }\r\n\r\n    class MediaCatalog extends Catalog {\r\n        constructor(name) {\r\n            super(name);\r\n        }\r\n\r\n        add(...medias) {\r\n            if(Array.isArray(medias[0])) {\r\n                medias = medias[0];\r\n            }\r\n\r\n            medias.forEach(function(x) {\r\n                if(!(x instanceof Media)) {\r\n                    throw 'Must add only medias';\r\n                }\r\n            });\r\n\r\n            return super.add(...medias);\r\n        }\r\n\r\n        getTop(count) {\r\n            if (count === null || typeof count != 'number' || count < 1) {\r\n                throw new Error(\"Invalid count!\")\r\n            }\r\n\r\n            this.items = this.items.sort((a, b) => a.rating < b.rating);\r\n\r\n            var result;\r\n            if (this.items.length < count) {\r\n                result = this.items;\r\n            }\r\n            else {\r\n                result = this.items.slice(0, count);\r\n            }\r\n\r\n            return result.map(x => {\r\n                return {\r\n                    id: x.id,\r\n                    name: x.name\r\n                }\r\n            });\r\n        }\r\n\r\n        getSortedByDuration() {\r\n\r\n        }\r\n    }\r\n\r\n    return {\r\n        getBook: function (name, isbn, genre, description) {\r\n            return new Book(name, isbn, genre, description);\r\n        },\r\n        getMedia: function (name, rating, duration, description) {\r\n            return new Media(name, rating, duration, description);\r\n        },\r\n        getBookCatalog: function (name) {\r\n            return new BookCatalog(name);\r\n        },\r\n        getMediaCatalog: function (name) {\r\n            return new MediaCatalog(name);\r\n        }\r\n    };\r\n}\r\n\r\nmodule.exports = solve;"]}